{"apiVersion":1,"groups":[{"orgId":1,"name":"tfd","folder":"alerts","interval":"1m","rules":[{"uid":"aeqzx84onyn0ge","title":"Predicted Price High","condition":"Threshold","data":[{"refId":"Query","relativeTimeRange":{"from":120,"to":0},"datasourceUid":"aeqm9xj4qymf4c","model":{"editorMode":"code","format":"table","intervalMs":1000,"maxDataPoints":43200,"rawQuery":true,"rawSql":"SELECT\n  NOW() AS time,\n  COUNT(*) AS high_price_count\nFROM public.predictions\nWHERE predicted_price \u003e 40000\n  AND prediction_time \u003e= NOW() - INTERVAL '2 minute';","refId":"Query","sql":{"columns":[{"parameters":[],"type":"function"}],"groupBy":[{"property":{"type":"string"},"type":"groupBy"}],"limit":50}}},{"refId":"High Price Count","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[],"type":"gt"},"operator":{"type":"and"},"query":{"params":["B"]},"reducer":{"params":[],"type":"last"},"type":"query"}],"datasource":{"type":"__expr__","uid":"__expr__"},"expression":"Query","intervalMs":1000,"maxDataPoints":43200,"reducer":"last","refId":"High Price Count","type":"reduce"}},{"refId":"Threshold","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[0],"type":"gt"},"operator":{"type":"and"},"query":{"params":["C"]},"reducer":{"params":[],"type":"last"},"type":"query"}],"datasource":{"type":"__expr__","uid":"__expr__"},"expression":"High Price Count","intervalMs":1000,"maxDataPoints":43200,"refId":"Threshold","type":"threshold"}}],"noDataState":"NoData","execErrState":"Error","annotations":{"description":"Check recent data in predictions table. Alert triggered when predicted price exceeds 40000.","summary":"ðŸš¨ Predicted price alert â€” {{ $values.high_price_count.Value }} values \u003e 40000 in last 2 minutes."},"isPaused":false,"notification_settings":{"receiver":"grafana-default-email"}},{"uid":"eer0ag2hl7ri8f","title":"Valid vs Invalid Rows (%)","condition":"C","data":[{"refId":"A","relativeTimeRange":{"from":3600,"to":0},"datasourceUid":"aeqm9xj4qymf4c","model":{"datasource":{"type":"grafana-postgresql-datasource","uid":"aeqm9xj4qymf4c"},"format":"time_series","instant":false,"intervalMs":60000,"maxDataPoints":43200,"range":true,"rawQuery":true,"rawSql":"SELECT\n  timestamp AS time,\n  ROUND(100.0 * valid_rows / total_rows, 2) AS valid_percentage,\n  ROUND(100.0 * invalid_rows / total_rows, 2) AS invalid_percentage\nFROM data_quality_stats\nWHERE $__timeFilter(timestamp)\nORDER BY time;","refId":"A"}},{"refId":"B","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[],"type":"gt"},"operator":{"type":"and"},"query":{"params":["B"]},"reducer":{"params":[],"type":"max"},"type":"query"}],"datasource":{"type":"__expr__","uid":"__expr__"},"expression":"A","intervalMs":1000,"maxDataPoints":43200,"reducer":"max","refId":"B","type":"reduce"}},{"refId":"C","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[50],"type":"gt"},"operator":{"type":"and"},"query":{"params":["C"]},"reducer":{"params":[],"type":"last"},"type":"query"}],"datasource":{"type":"__expr__","uid":"__expr__"},"expression":"B","intervalMs":1000,"maxDataPoints":43200,"refId":"C","type":"threshold"}}],"dashboardUid":"fb935b72-a0c2-43a0-9c19-c4a255a85bfe","panelId":1,"noDataState":"NoData","execErrState":"Error","for":"1m","annotations":{"__dashboardUid__":"fb935b72-a0c2-43a0-9c19-c4a255a85bfe","__panelId__":"1","summary":"Percentage of invalid rows is greater than 50"},"isPaused":false,"notification_settings":{"receiver":"grafana-default-email"}},{"uid":"fer0atcf3bldse","title":"Predicted Price Trend (Within Range)","condition":"C","data":[{"refId":"A","relativeTimeRange":{"from":3600,"to":0},"datasourceUid":"aeqm9xj4qymf4c","model":{"datasource":{"type":"grafana-postgresql-datasource","uid":"aeqm9xj4qymf4c"},"editorMode":"code","format":"table","instant":false,"intervalMs":60000,"maxDataPoints":43200,"range":true,"rawQuery":true,"rawSql":"SELECT \n    prediction_time,\n    predicted_price\nFROM predictions\nWHERE $__timeFilter(prediction_time)\nORDER BY prediction_time;","refId":"A","sql":{"columns":[{"parameters":[],"type":"function"}],"groupBy":[{"property":{"type":"string"},"type":"groupBy"}],"limit":50}}},{"refId":"B","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[],"type":"gt"},"operator":{"type":"and"},"query":{"params":["B"]},"reducer":{"params":[],"type":"max"},"type":"query"}],"datasource":{"type":"__expr__","uid":"__expr__"},"expression":"A","intervalMs":1000,"maxDataPoints":43200,"reducer":"max","refId":"B","type":"reduce"}},{"refId":"C","relativeTimeRange":{"from":0,"to":0},"datasourceUid":"__expr__","model":{"conditions":[{"evaluator":{"params":[100000],"type":"gt"},"operator":{"type":"and"},"query":{"params":["C"]},"reducer":{"params":[],"type":"last"},"type":"query"}],"datasource":{"type":"__expr__","uid":"__expr__"},"expression":"B","intervalMs":1000,"maxDataPoints":43200,"refId":"C","type":"threshold"}}],"dashboardUid":"24bf8cdb-d984-4163-b7d5-ad2eb2d5c84b","panelId":5,"noDataState":"NoData","execErrState":"Error","for":"1m","annotations":{"__dashboardUid__":"24bf8cdb-d984-4163-b7d5-ad2eb2d5c84b","__panelId__":"5","summary":"predicted flight price is more than 1 lakh"},"isPaused":false,"notification_settings":{"receiver":"grafana-default-email"}}]}]}